<html>
	<head>
		<link rel="stylesheet" href="stylesheet.css">
		<link rel="stylesheet" href="gallerysheet.css">
		<link rel="stylesheet" href="imagesheet.css">
		<script src="gallerycode.js"></script>
	</head>
	<body>

		<nav id="navbar">
		  <ul>
			<li class="navlink"><a class="navanchor" href="index.html">Home</a></li>
			<li class="navlink"><a class="navanchor" href="#">Games<span>&#9658;</span></a>
			  <div class="dropdown-content">
				<a class = "dropdown-item" href="amalgama.html">AmalgamA (missing gallery) </a>
				<a class = "dropdown-item" href="game-prototypes.html">Game Prototypes (empty)</a>
			  </div>
			</li>
			<li class="navlink"><a class="navanchor" href="#">Projects<span>&#9658;</span></a>
			  <div class="dropdown-content">
				<a class = "dropdown-item" href="weaving.html">Digital Weaving</a>
				<a class = "dropdown-item" href="chineselattice.html">Chinese Lattice Windows</a>
				<a class = "dropdown-item" href="4dcrosssection.html">4D Cross-section</a>
				<a class = "dropdown-item" href="largerthanlifeca.html">Larger-than-Life Cellular Automaton (missing gallery)</a>
				<a class = "dropdown-item" href="voronoitiling.html">Voronoi Tiling(missing gallery)</a>
				<a class = "dropdown-item" href="starsky.html">Starsky</a>
				<a class = "dropdown-item" href="erosion.html">Fluvial Erosion</a>
				<a class = "dropdown-item" href="apolloniangasket.html">Apollonian Flower(missing gallery) </a>
				<a class = "dropdown-item" href="celticknot.html">Celtic Knots (missing gallery) </a>
				<a class = "dropdown-item" href="shader-experiments.html">Shader Experiments</a>
			  </div>
			</li>
			<li class="navlink"><a class="navanchor" href="#">Other<span>&#9658;</span></a>
			  <div class="dropdown-content">
				<a class = "dropdown-item" href="">(empty) Cultural Evolution</a>
				<a class = "dropdown-item" href="">(empty) MOOCs</a>
				<a class = "dropdown-item" href="">(empty) Cool people</a>
				<!--
				<a class = "dropdown-item" href="">(empty) Reading Log</a>
				<a class = "dropdown-item" href="">(empty) Protein Quality (AA Composition)</a>
				<a class = "dropdown-item" href="">(empty) Circle of Fifths</a>
				-->
			  </div>
			</li>
		  <li class="navlink"><a class="navanchor" href="about.html">About</a></li>
		  </ul>
		</nav>

		<div id="body">
		<div id="sidebar">
			<a href="#introduction" class="sidelink">Introduction</a>
			<a href="#rules" class="sidelink">What are weaving drafts?</a>
			<a href="#rules-basics" class="sidelink-inner">Basics</a>
			<a href="#rules-structure" class="sidelink-inner">Structure</a>
			<a href="#rendering" class="sidelink">Coloring</a>
			<a href="#cultural-evolution" class="sidelink">Cultural Evolution</a>
			<a href="#beyond" class="sidelink">Beyond</a>
			<a href="#gallery" class="sidelink">Gallery</a>
		  </div>
		  <div id="main">
			<h1>Digital Weaving</h1>
			<section id="introduction">
			  <h2>Introduction</h2>
				<p>
					Digital Weaving is project where I implemented real world "weaving drafts" (basically a "computer program" for looms) and attempted to evolve <a href="cultural-evolution.html" target="_blank">computational cultures</a> on.
				</p>
				<p>
					It is another one of my favourite projects, even though the results weren't quite what I expected. It was very instructive for me to realize some of the ways in which cultural evolution works or does not work, something I can definitely use on future projects.
				</p>
				<p>
				I worked on it in September and October of 2020, and I learned about the weaving drafts from <a href="https://www.glassner.com/" target="_blank">Andrew Glassner</a> (you can read his <a href="https://www.glassner.com/wp-content/uploads/2014/04/CG-CGA-PDF-02-11-Digital-Weaving-1-Nov02.pdf" target="_blank">three</a> <a href="https://www.glassner.com/wp-content/uploads/2014/04/CG-CGA-PDF-03-01-Digital-Weaving-2-Jan03.pdf" target="_blank">articles</a> <a href="https://www.glassner.com/wp-content/uploads/2014/04/CG-CGA-PDF-03-03-Digial-Weaving-3-Mar03.pdf" target="_blank">here</a>, or his <a href="https://www.glassner.com/creative/art/digital-work/digital-weaving/" target="_blank">gallery</a>).
				</p>
				<!-- <div style="margin:auto; text-align:center;"><img src="celticknot-img/hor2.png" caption="!FIXME"></img></div> -->
			<hr></section>
			<section id="rules">
			  <h2>What are weaving drafts?</h2>
			  <h3 id="rules-basics">Basics</h3>
				  <img style="width:30%; padding-left:2%;" align="right" src="weaving-img\draft-binary-code.png" caption="with luminosity cycle"></img>
				  <p>
					Looms (of the kind this emulates) have horizontal and vertical threads; let's say the horizontal ones are black, the vertical ones are white. A weaving draft is a diagram that describes which thread in on top (and thus visible) at each crossing. The best way to understand it is visually!
				  </p>
				  <p>
					There are three elements to the weaving draft:
					<ul>
						<li>Horizontal array (or warp threads), at the top;</li>
						<li>Vertical array (or weft threads), on the right;</li>
						<li>Motif (or tie-up), on the upper right.</li>
					</ul>
					These three elements determine the woven pattern, on the bottom left.
				  </p>
				  <p>
					The horizontal and vertical arrays have exactly one "black" square per column and row, respectively. The motif can be any combination of black and white squares. As you can see (I hope) by following the picture on the right. You start in any square of the pattern, and look at the black square in the horizontal and vertical arrays (as shown by the red and blue lines, respectively). Then, you see you send horizontal and vertical beams from the arrays and see where they intersect in the motif.
					The black square of the pattern leads to a black square on the motif, and the white square on the pattern leads to a white square on the motif. You can see, then, how the three elements determine the final woven pattern.
				  </p>
				  <p>
					The thing I love about this system is that it has a clear element of "information compression". If you make the arrays and motif large enough, you can determine the color of every single square of the pattern, so you could represent any picture with it. The interest comes in when you reduce the sizes. Now, you can't represent every picture; if your pattern is large enough, it means that some squares are reused <i>somewhere</i>. It is not always predictable where, and that's where the fun lies! You play around with the elements and see what comes up.  
				  </p>
			  <h3 id="rules-structure">Structure</h3>
				  <p>
				To my own system (different from Glassner's), I add two others:
				<ul>
					<li>Unit;</li>
					<li>Symmetry String.</li>
				</ul>
				<img style="width:30%; padding-left:2%; padding-top:1%;" align="right" src="weaving-img\draft-binary-unit.png" caption="with luminosity cycle"></img>
				The <i>unit</i> is simply a small pattern on the array. This unit is repeated throughout, but transformed. You can see it the figure to the right, where I highlight three occurrences of the unit.
				The red pattern, on the left, is the basic unit. The blue pattern, on the center, is reflected across the y-axis. The green pattern, on the right, is reflected across the x-axis. Rotations also occur, as well as both reflections. 
				The <i>symmetry string</i> is simply a string of characters that describes how the unit is transformed to make the full array. In this example, it is "NRYNXY" (N=normal, R=rotated, X=reflected across x, Y=reflected across y). This string itself can be symmetrical (not the same as a palindrome).
			  </p>
			  <!-- <div style="margin:auto; text-align:center;"><img src="celticknot-img/hor1.png" caption="!FIXME"></img></div> -->
			<hr></section>
			<section id="rendering">
			  <h2>Coloring</h2>
				<p>
					Coloring was an interesting part of this project, and it lead me to new places (which I still haven't fully explored). How do you color a binary pattern? 
					The obvious answer, of course, is with two colors - but this isn't very interesting. In real world weaving, you color the threads themselves - but the fun of a formal system is, in part, which constraints you can drop (or add).
					I tried coloring the strands with alternating variations of the same color, but the result wasn't spectacular.
				<div class="img-row">
					<div class="img-row-item"> <img  src="weaving-img\color-binary1.png" caption="with luminosity cycle"></img></div>
					<div class="img-row-item"> <img src="weaving-img\color-binary2.png" caption="without luminosity cycle"></img></div>
					<div class="img-row-item"> <img src="weaving-img\color-binary4.png" caption="without luminosity cycle"></img></div>
				</div>
				</p>
				<p>
					After some poking around, I came across an interesting idea, and that is of <a href="https://en.wikipedia.org/wiki/Lightness" target="_blank">perceived lightness</a>. The basic idea is that different hues (like yellow, red, blue) have different "brightness" levels (I saw a grayscale photo of vegetables and fruits, which were still very distinguishable in grayscale). This is a bit different from HSL's lightness value, and there are difference definitions for how lightness is actually computed, but the rough idea is a good start!
					The pictures that follow used completely random colors, except that ones with low lightness were chosen for the black squares and vice-versa for white squares.
					<div class="img-row">
						<div class="img-row-item"> <img  src="weaving-img\col-lum1.png" caption="with luminosity cycle"></img></div>
						<div class="img-row-item"> <img src="weaving-img\col-lum2.png" caption="without luminosity cycle"></img></div>
						<div class="img-row-item"> <img src="weaving-img\col-lum3.png" caption="without luminosity cycle"></img></div>
					</div>
				</p>
				<p>
					Not perfect, but certainly a solid start. And, of course, the hue of the palette also matters.
					<div class="img-row">
						<div class="img-row-item"> <img  src="weaving-img\col1.png" caption="with luminosity cycle"></img></div>
						<div class="img-row-item"> <img src="weaving-img\col2.png" caption="without luminosity cycle"></img></div>
						<div class="img-row-item"> <img src="weaving-img\col3.png" caption="without luminosity cycle"></img></div>
						<div class="img-row-item"> <img  src="weaving-img\col4.png" caption="with luminosity cycle"></img></div>
						<div class="img-row-item"> <img src="weaving-img\col6.png" caption="without luminosity cycle"></img></div>
						<div class="img-row-item"> <img src="weaving-img\col5.png" caption="without luminosity cycle"></img></div>
						<div class="img-row-item"> <img  src="weaving-img\col7.png" caption="with luminosity cycle"></img></div>
						<div class="img-row-item"> <img src="weaving-img\col8.png" caption="without luminosity cycle"></img></div>
						<div class="img-row-item"> <img src="weaving-img\col9.png" caption="without luminosity cycle"></img></div>
					</div>
				</p>
				<p>
					<img style="width:20%;" align="right" src="weaving-img\draft-color.png" caption="with luminosity cycle"></img>
					Adding a more controlled palette, but still largely clustered by lightness, the results are significantly better! Also, if you notice, these pictures seem to have somehow more structure. Where there would be large zones of black or white before, now there are colorful patterns. This is because I colored the motif rather than the threads, as seen to the right.
					The final coloring system was:
					<ul>
						<li>Choose a color palette;</li>
						<li>Distribute colors into two groups according to lightness (and drop ones too close to the middle);</li>
						<li>Assign colors to the motif with light colors going to white squares and dark colors to the black.</li>
					</ul>
					You can see how this changes the initial black and white pattern - the figure on the right is the same as the one from the <a href="#introduction">introduction</a>, with added colors to pattern and motif.
				</p>
				<p>
					All that's left in this project is to discuss how these patterns were created, and that leads to a discussion of cultural evolution.
				</p>
			<hr></section>
			
			<section id="cultural-evolution">
			  <h2>Cultural Evolution</h2>
			  <p>
				For a more detailed preamble, read my more general writing on <a href="cultural-evolution.html" target="_blank">Cultural Evolution</a>. The general idea is to create not individual patterns, but <i>styles</i> of patterns, in a way that you can identify which style a particular pattern comes from and even its diverse influences.
			  </p>
			  <h3>Approach 1: Statistical Learning</h3>
				<p>
				My first approach was to use encapsulate a whole culture in a single agent. A single agent would learn based on the input patterns and produce many variations. For this, I started with <a href="" target="_blank">Markov Chains</a> to learn units, and <a href="" target="_blank">Markov Fields</a> to learn the motifs, though the algorithms themselves underwent several iterations with heavy borrowing from the <a href="" target="_blank">Pixel-based Texture Synthesis</a> with more general probability fields.				
				</p>
				<p>
					In a naive and mathematical way, it succeeded - both units and motifs were statistically different between agents (that is, agents started the same, but evolved differently and converged on a specific range of patterns over generations). Unfortunately, this wasn't enough to create a unified style - the system was too chaotic and small variations in unit and motif created big changes in the resulting pattern.
				</p>
				<p>
					It did, sometimes, create a more coherent sequence of patterns, but it wasn't reliable enough to be usable.
				</p>
				<div class="img-row">
					<div class="img-row-item" style="width:20%;"> <img  src="weaving-img\cult1.png" caption="with luminosity cycle"></img></div>
					<div class="img-row-item" style="width:20%;"> <img  src="weaving-img\cult2.png" caption="with luminosity cycle"></img></div>
					<div class="img-row-item" style="width:20%;"> <img  src="weaving-img\cult3.png" caption="with luminosity cycle"></img></div>
					<div class="img-row-item" style="width:20%;"> <img  src="weaving-img\cult4.png" caption="with luminosity cycle"></img></div>
				</div>
			  <h3>Approach 2: Dawkins' Culto-morphs</h3>
				<p>
					After a mild crisis-of-faith, I remember <a href="https://en.wikipedia.org/wiki/Richard_Dawkins" target="_blank">Richard Dawkins</a>' <a href="http://www.emergentmind.com/biomorphs" target="_blank">Biomorphs</a>. This is not what I initially had in mind, but it turned out much more effective in such a chaotic system!
				</p>
				<p>
					Basically, you encode the pattern in a single string, like genes in DNA, and variations are produce with random mutations. The downside to this is that it doesn't generalize to multiple agents as well (sure, you imagine an orgy-like reproduction, but it gets messy), but works great for single or pairs, where combining two strings it straightforward.
				</p>
				<div class="img-row">
					<div class="img-row-item"> <img  src="weaving-img\morph4.png" caption="with luminosity cycle"></img></div>
					<div class="img-row-item"> <img src="weaving-img\morph3.png" caption="without luminosity cycle"></img></div>
					<div class="img-row-item"> <img src="weaving-img\morph5.png" caption="without luminosity cycle"></img></div>
				</div>
				<p>
					As you can see, there is a sense of style to the patterns. Two aspects warrant some comment: 
					(1) not every mutation has visible effects - this is just like genetic mutations, some change some internal structure that only "unlocks" future evolutionary paths, and that is certainly the case here, since not every square of the motif is necessarily used; 
					(2) this is not a satisfying representation of culture, since it lacks any kind of tradition - you can start with a completely random pattern and generate variations from there.
				</p>
			  <h3>Conclusion</h3>
				<p>
					At the end of the day, neither of the paths was exactly what I wanted to get out of it. I tried other variations, for example, with the idea of critics and cultural differentiation (agents generate many patterns and cultural-critics decide which patterns are learned by the next generation, by being more representative of their own culture than other),
					but these were difficult to make very appealing (at least without an additional aesthetic evaluator of some kind).
				</p>
				<p>
					It was interesting to work on regardless, and opened some doors while closing others, so hopefully the next project involving cultural evolution will be more fruitful!
				</p>
			<hr></section>
			
			
			<section id="beyond">
			  <h2>Beyond</h2>
			  <p>
				One thing I learned from this project, is that cultural evolution is difficult to make appealing when working on too low and indirect of a level. By this I mean that I was working on a system of pixels determined in a roundabout way by the arrays. While the patterns it produces are cool, a small change in the draft can lead to very different outcomes; in simulating culture, you probably want changes to be identifiable, to see the influences. This says little about real cultural evolution in humans, but my purpose is to create systems that players can look at and see how styles change in an identifiable way from place to place.
				In the future, I will try to use a coarser system of cultural change, perhaps by having multiple units and exchanging them whole, and so on.
			  </p>
			  <p>
				Glassner create a whole language to describe the arrays. I found this a bit overkill, but my own system was very limited. Something else that would be cool to experiment it is multiple units - including, say, coupling units to the array position, using a different unit for the border of the pattern and another for the center; and also different transformations - instead of simply symmetrical transformations, individual squares could be change.
			  </p>
			  <p>
				Finally (and this is something I'll probably do), to work out a more robust palette generator for binary patterns. The lightness idea has legs, I think, but I need to figure out how to generate pleasant hue palettes and put them all together.
			  </p>
			  <p>
				Here's a little extra:
					<div style="text-align:center;">
						<img style="padding:1%;" align="center" width="25%" src="weaving-img/anim.gif"  />
					</div>
			  </p>
			<hr></section>
			<section id="gallery">
			  <h2>Gallery</h2>
			  
			<hr></section>
		  </div>
		</div>
	</body>
</html>